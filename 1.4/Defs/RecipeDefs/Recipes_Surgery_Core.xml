<?xml version="1.0" encoding="utf-8" ?>
<Defs>

	<!-- Base Class for all mechanical surgeries that applies to appropriate mechanicals -->
    <RecipeDef Name="MHC_surgeryMechanicalBase" Abstract="True">
        <effectWorking>Repair</effectWorking>
        <soundWorking>Recipe_Machining</soundWorking>
        <workSpeedStat>MHC_MechanicalOperationSpeed</workSpeedStat>
        <workSkill>Crafting</workSkill>
        <workSkillLearnFactor>16</workSkillLearnFactor>
        <anesthetize>false</anesthetize>
    </RecipeDef>

	<!-- Surgery to shutdown any incapacitated mechanical unit -->
    <RecipeDef ParentName="MHC_surgeryMechanicalBase">
		<defName>MHC_MechanicalShutdown</defName>
		<label>Shut down central core</label>
		<description>Shuts down a mechanical unit to render it completely non-functioning and deceased.</description>
		<workerClass>Recipe_ExecuteByCut</workerClass>
		<jobString>Shutting down mechanical unit.</jobString>
		<workAmount>800</workAmount>
		<surgerySuccessChanceFactor>5</surgerySuccessChanceFactor>
		<hideBodyPartNames>true</hideBodyPartNames>
        <isViolation>true</isViolation>
		<targetsBodyPart>false</targetsBodyPart>
	</RecipeDef>

	<!-- Surgery to restore body parts in mechanical units -->
	<RecipeDef ParentName="MHC_surgeryMechanicalBase">
		<defName>MHC_RestoreBodyPartMechanical</defName>
		<label>Restore part</label>
		<description>Restores a particular body part.</description>
		<workerClass>MechHumanlikes.Recipe_RestoreMechanicalPart</workerClass>
		<jobString>Restoring body part.</jobString>
		<workAmount>1400</workAmount>
		<skillRequirements>
			<Crafting>4</Crafting>
		</skillRequirements>
	  	<ingredients>
			<li>
				<filter>
					<thingDefs>
						<li>MHC_PartPack</li>
					</thingDefs>
				</filter>
				<count>1</count>
			</li>
    	</ingredients>
    	<fixedIngredientFilter>
			<thingDefs>
				<li>MHC_PartPack</li>
			</thingDefs>
		</fixedIngredientFilter>
	</RecipeDef>

	<!-- Surgery to repaint mechanical units -->
	<RecipeDef ParentName="MHC_surgeryMechanicalBase">
		<defName>MHC_RepaintMechanical</defName>
		<label>Repaint</label>
		<description>Changes the paint color of a mechanical unit.</description>
		<workerClass>MechHumanlikes.Recipe_PaintMechanicalUnit</workerClass>
		<jobString>Painting mechanical unit.</jobString>
		<workAmount>400</workAmount>
	  	<ingredients>
			<li>
				<filter>
					<thingDefs>
						<li>Steel</li>
					</thingDefs>
				</filter>
				<count>5</count>
			</li>
    	</ingredients>
    	<fixedIngredientFilter>
			<thingDefs>
				<li>Steel</li>
			</thingDefs>
		</fixedIngredientFilter>
	</RecipeDef>

	<!-- Surgery to increase the maintenance level of a unit to a certain extent. -->
	<RecipeDef ParentName="MHC_surgeryMechanicalBase">
		<defName>MHC_DoEmergencyMaintenance</defName>
		<label>Do makeshift maintenance</label>
		<description>Use parts to repair severe maintenance flaws. Since maintenance is primarily an internal activity, this can only bring it to 40%.</description>
		<workerClass>MechHumanlikes.Recipe_DoEmergencyMaintenance</workerClass>
		<jobString>Restoring body part.</jobString>
		<workAmount>800</workAmount>
		<skillRequirements>
			<Crafting>6</Crafting>
		</skillRequirements>
	  	<ingredients>
			<li>
				<filter>
					<thingDefs>
						<li>MHC_PartPack</li>
					</thingDefs>
				</filter>
				<count>1</count>
			</li>
    	</ingredients>
    	<fixedIngredientFilter>
			<thingDefs>
				<li>MHC_PartPack</li>
			</thingDefs>
		</fixedIngredientFilter>
	</RecipeDef>

	<!-- Surgery to reprogram drones to serve the colony -->
    <RecipeDef ParentName="MHC_surgeryMechanicalBase">
		<defName>MHC_ReprogramDrone</defName>
		<label>reprogram drone</label>
		<description>A straightforward but delicate operation, reprogramming drones to suit the colony's purposes is an excellent way to strengthen capabilities. However, the previous owners may have installed safeguards against such operations, so there is a high risk of death should it fail.</description>
		<workerClass>MechHumanlikes.Recipe_ReprogramDrone</workerClass>
		<jobString>Reprogramming drone.</jobString>
		<workAmount>5000</workAmount>
		<skillRequirements>
            <Crafting>8</Crafting>
            <Intellectual>6</Intellectual>
        </skillRequirements>
		<surgerySuccessChanceFactor>0.8</surgerySuccessChanceFactor>
		<deathOnFailedSurgeryChance>0.4</deathOnFailedSurgeryChance>
		<ingredients>
			<li>
				<filter>
					<categories>
						<li>Medicine</li>
					</categories>
				</filter>
				<count>1</count>
			</li>
		</ingredients>
		<fixedIngredientFilter>
			<categories>
				<li>Medicine</li>
			</categories>
		</fixedIngredientFilter>
		<addsHediff>MHC_Restarting</addsHediff>
	</RecipeDef>

	<!-- Reboot, akin to anesthetic but requiring no medicine -->
    <RecipeDef ParentName="MHC_surgeryMechanicalBase">
		<defName>MHC_RebootUnit</defName>
		<label>Reboot unit</label>
		<description>An exceedingly straightforward operation to restart the unit, without any side effects or consequences.</description>
		<workerClass>Recipe_AddHediff</workerClass>
		<jobString>Rebooting unit.</jobString>
		<workAmount>5000</workAmount>
		<skillRequirements>
            <Crafting>4</Crafting>
            <Intellectual>2</Intellectual>
        </skillRequirements>
		<ingredients>
			<li>
				<filter>
					<categories>
						<li>Medicine</li>
					</categories>
				</filter>
				<count>1</count>
			</li>
		</ingredients>
		<fixedIngredientFilter>
			<categories>
				<li>Medicine</li>
			</categories>
		</fixedIngredientFilter>
		<surgerySuccessChanceFactor>4</surgerySuccessChanceFactor>
		<addsHediff>MHC_Restarting</addsHediff>
	</RecipeDef>

</Defs>